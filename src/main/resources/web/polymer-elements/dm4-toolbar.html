<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="dm4-dropdown-menu.html">

<dom-module id="dm4-toolbar">
    <style>
        :host {
            flex: none;
            background-color: lightblue;
        }
    </style>
    <template>
        <!-- Workspaces -->

        Workspace
        <dm4-dropdown-menu label="Workspace">
            <paper-item>Workspace 1</paper-item>
            <paper-item>Workspace 2</paper-item>
            <paper-item>Workspace 3</paper-item>
        </dm4-dropdown-menu>

        <!-- Topicmaps -->

        <iron-ajax auto url="http://localhost:8080/core/topic/by_type/dm4.topicmaps.topicmap"
            headers='{"Content-Type": "application/json"}' last-response="{{topicmaps}}">
        </iron-ajax>

        Topicmap
        <dm4-dropdown-menu label="Topicmap" on-iron-select="_topicmapSelect">
            <template id="topicmapsTemplate" is="dom-repeat" items="[[topicmaps.items]]">
                <paper-item>{{item.value}}</paper-item>
            </template>
        </dm4-dropdown-menu>
    </template>
</dom-module>

<script>
    Polymer({
        is: "dm4-toolbar",

        _topicmapSelect: function(e) {
            var topicmap = this.$.topicmapsTemplate.itemForElement(e.detail.item);
            this.fire("topicmap-select", {topicmapId: topicmap.id});
        }
    });
</script>
