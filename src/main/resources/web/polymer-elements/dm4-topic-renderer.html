<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="dm4-simple-renderer.html">
<link rel="import" href="dm4-composite-renderer.html">
<link rel="import" href="dm4-behaviors.html">

<dom-module id="dm4-topic-renderer">

    <style>
        :host {
            display: block;
        }
    </style>

    <template>
        <template is="dom-if" if="{{_isSimple(topic)}}" restamp>
            <dm4-simple-renderer topic="{{topic}}"></dm4-simple-renderer>
        </template>
        <template is="dom-if" if="{{_isComposite(topic)}}" restamp>
            <dm4-composite-renderer topic="{{topic}}"></dm4-composite-renderer>
        </template>
    </template>

    <script>
        Polymer({
            is: "dm4-topic-renderer",

            properties: {

                /**
                 * The rendered topic.
                 */
                topic: Object
            },

            behaviors: [
                DM4.Utils
            ],

            _isSimple: function(topic) {
                // console.log("_isSimple topic", topic);
                return topic && this.getTopicType(topic.type_uri).isSimple();
            },

            _isComposite: function(topic) {
                // console.log("_isComposite topic", topic);
                return topic && this.getTopicType(topic.type_uri).isComposite();
            }
        });
    </script>

</dom-module>
